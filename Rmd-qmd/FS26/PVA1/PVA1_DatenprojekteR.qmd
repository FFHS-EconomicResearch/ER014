---
title: "Data Science and Strategy for Business"
subtitle: "Kurze Einführung in R und RStudio"
author: "Prof. Dr. Jörg Schoder"
institute: "FFHS"
date: today
bibliography: ../../../lit/my_bib.bib
format:
  revealjs:
    theme: [default, ../../../css/ffhs-theme.scss]
    slide-number: c/t
    highlight-style: github
    code-line-numbers: true
    incremental: false
    chalkboard: true
    transition: slide
    self-contained: false
    lib-dir: ../../../libs
    include-after-body: ../../../css/ffhs-footer.html
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(fontawesome)
# library(RefManageR)
# BibOptions(check.entries = FALSE, bib.style = "authoryear", style = "markdown", dashed = TRUE)
# bib <- ReadBib(xfun::from_root("lit","my_bib.bib"))
```

## {.title-slide-custom}

::: {.title-block}
# ER014 — Data Science and Strategy for Business

## PVA1: Kurze Einführung in R und RStudio

<br>

**FS 2025**  
Prof. Dr. Jörg Schoder  
<small>{{< fa github >}} @FFHS-EconomicResearch &nbsp; {{< fa linkedin >}} @jfschoder</small>
:::

---

## Agenda {.section-slide}

::: {.section-badge}
Agenda
:::

### Einführung R und RStudio

- Motivation und Einordnung
- {{< fa r-project >}} Basics  
- RMarkdown / Quarto  
- Datenprojekte in {{< fa r-project >}}

---

# Motivation und Einordnung {.inverse background-color="#D50006"}

---

## Future Skills und Rollen von Managern

::: {.section-badge}
Motivation und Einordnung
:::

:::: {.columns}

::: {.column width="52%"}
- Praxisproblem: Data Science (DS) von Informatikern dominiert  
  → Entwicklung an Business Need vorbei

- DS for Managers → Coding gehört für HBS zum Skillset
  - Großunternehmen: „Übersetzungs-"Kompetenz (Management ↔ Datenteams)
  - KMU: Prototyping-Kompetenz
:::

::: {.column width="48%"}

```{r}
#| echo: false
#| fig-width: 5
#| fig-height: 4.5
#| out-width: "100%"
library(ggplot2)

# Venn-Diagramm mit ggplot2 + ggforce
if (!requireNamespace("ggforce", quietly = TRUE)) install.packages("ggforce", quiet = TRUE)
library(ggforce)

# Kreismittelpunkte (Dreieck-Anordnung)
circles <- data.frame(
  x = c(0, -0.75,  0.75),
  y = c(0.65, -0.35, -0.35),
  r = c(1.05, 1.05, 1.05),
  label = c("Informatik/Com-\nputerwissenschaft", "Statistik", "Business/SME")
)

# Corporate Rot mit Transparenz
fill_col <- "#D50006"

ggplot() +
  # Drei Kreise
  geom_circle(data = circles,
              aes(x0 = x, y0 = y, r = r),
              fill = fill_col, alpha = 0.25, color = "#D50006", linewidth = 0.8) +
  # Beschriftungen der Kreise
  annotate("text", x = 0,    y = 1.85, label = "Informatik/Com-\nputerwissenschaft",
           size = 3.2, fontface = "bold", color = "#1a1a1a", lineheight = 0.9) +
  annotate("text", x = -1.6, y = -0.8, label = "Statistik",
           size = 3.2, fontface = "bold", color = "#1a1a1a") +
  annotate("text", x =  1.6, y = -0.8, label = "Business/SME",
           size = 3.2, fontface = "bold", color = "#1a1a1a") +
  # DS Label in der Mitte
  annotate("text", x = 0, y = 0.05, label = "DS",
           size = 5.5, fontface = "bold", color = "#D50006") +
  coord_fixed(xlim = c(-2.4, 2.4), ylim = c(-1.6, 2.4)) +
  theme_void() +
  theme(plot.background = element_rect(fill = "white", color = NA))
```

:::

::::

---

## Future Skills und Rollen (schrittweiser Aufbau) {.incremental-venn}

::: {.section-badge}
Motivation und Einordnung
:::

:::: {.columns}

::: {.column width="52%"}

::: {.fragment}
**Schritt 1:** Informatik/Computerwissenschaft ist die traditionelle Heimat von Data Science
:::

::: {.fragment}
**Schritt 2:** Statistik liefert die methodische Grundlage für Analysen
:::

::: {.fragment}
**Schritt 3:** Business-Wissen entscheidet über die Relevanz der Ergebnisse
:::

::: {.fragment}
→ **DS** entsteht im Schnittbereich aller drei Disziplinen
:::

:::

::: {.column width="48%"}

```{r}
#| echo: false
#| fig-width: 5
#| fig-height: 4.5
#| out-width: "100%"
library(ggplot2)
library(ggforce)

circles <- data.frame(
  x = c(0, -0.75, 0.75),
  y = c(0.65, -0.35, -0.35),
  r = c(1.05, 1.05, 1.05)
)

fill_col <- "#D50006"

p <- ggplot() +
  geom_circle(data = circles,
              aes(x0 = x, y0 = y, r = r),
              fill = fill_col, alpha = 0.25, color = "#D50006", linewidth = 0.8) +
  annotate("text", x = 0,    y = 1.85, label = "Informatik/Com-\nputerwissenschaft",
           size = 3.2, fontface = "bold", color = "#1a1a1a", lineheight = 0.9) +
  annotate("text", x = -1.6, y = -0.8, label = "Statistik",
           size = 3.2, fontface = "bold", color = "#1a1a1a") +
  annotate("text", x =  1.6, y = -0.8, label = "Business/SME",
           size = 3.2, fontface = "bold", color = "#1a1a1a") +
  annotate("text", x = 0, y = 0.05, label = "DS",
           size = 5.5, fontface = "bold", color = "#D50006") +
  coord_fixed(xlim = c(-2.4, 2.4), ylim = c(-1.6, 2.4)) +
  theme_void() +
  theme(plot.background = element_rect(fill = "white", color = NA))
p
```

:::

::::

---

## Daten: vom Kostenfaktor zum Asset

::: {.section-badge}
Motivation und Einordnung
:::

::: {.panel-tabset}

### Perspektiven

```{r}
#| echo: false
#| out-width: '100%'
#| fig-align: 'center'
knitr::include_graphics(xfun::from_root('img','PVA3','data_in_business_(tableau)_1.PNG'))
```

### Bewertung

```{r}
#| echo: false
#| out-width: '80%'
#| fig-align: 'center'
knitr::include_graphics(xfun::from_root('img','PVA3','data_in_business_(tableau)_2.PNG'))
```

:::

::: {.quelle}
Quelle: [cloudflight.io](https://www.cloudflight.io/de/download/uncategorized-download/turn-data-into-products-vom-data-scientist-zum-data-business-owner/)
:::

::: {.notes}
- Data is Oil: Quatsch, weil Daten mehr werden, Öl aber verbraucht wird.
- Aber: Wie beim Öl entsteht der Wert auch bei Daten erst durch Weiterverarbeitung.
:::

---

## Warum Programmierung?

::: {.section-badge}
Motivation und Einordnung
:::

::: {.panel-tabset}

### Kompetenz

:::: {.columns}
::: {.column width="50%"}
```{r}
#| echo: false
#| out-width: '100%'
knitr::include_graphics(xfun::from_root('img','PVA1','Programming_Thinking_(SteveJobs).PNG'))
```
:::
::: {.column width="50%"}
```{r}
#| echo: false
#| out-width: '100%'
knitr::include_graphics(xfun::from_root('img','PVA1','Programming_Quote_(Hawking).PNG'))
```
:::
::::
::: {.quelle}
Bildquellen: [ilovecoding.org](https://twitter.com/ilovecodingorg/status/844202136980389888), [imrananees.blogspot.com](https://imrananees.blogspot.com/2019/10/basic-computer-programming-essential.html)
:::

### Benchmark

Beispiel: Harvard Business School — Wahlmodule „Data Science for Managers"

::: {.small}
**DSM1:** „Although few HBS MBA students will be actively engaged in coding post-graduation, the course faculty believe that having **some exposure to basic, hands-on coding and techniques** will allow our students to **more effectively manage and interact with data scientists**."

**DSM2:** „[..] allows students to build a deeper understanding of **how data and analytics can complement judgment for managerial decision making**."
:::

:::

---

## Warum R?

::: {.section-badge}
Motivation und Einordnung
:::

```{r}
#| echo: false
#| out-width: '100%'
#| fig-align: 'center'
knitr::include_graphics(xfun::from_root('img','PVA1','whyR.svg'))
```

::: {.quelle}
Eigene Darstellung.
:::

::: {.notes}
- März 2024: Platz 6 im PYPL Popularity Ranking
- Am Ende auch egal — Konvergenz durch Quarto (R, Python, Julia)
:::

---

# {{< fa r-project >}} Basics {.inverse background-color="#D50006"}

---

## {{< fa r-project >}}-chitektur

::: {.section-badge}
{{< fa r-project >}} Basics
:::

:::: {.columns}
::: {.column width="50%"}
```{r}
#| echo: false
#| out-width: '100%'
knitr::include_graphics(xfun::from_root('img','PVA1','R-chitektur_(Field_2012_S63).PNG'))
```
:::
::: {.column width="50%"}
- **Base {{< fa r-project >}}**
  - der „Motor" / das „Betriebssystem"
  - Installation via CRAN
- **Bibliotheken** (Pakete)
  - die „Apps"
  - Erweiterung der Funktionalität
:::
::::

::: {.quelle}
Bildquelle: Field (2012), S. 63.
:::

---

## {{< fa r-project >}} als objektorientierte Sprache

::: {.section-badge}
{{< fa r-project >}} Basics
:::

- **Alles ist ein Objekt** — Daten, Funktionen, Diagramme
- Objekte gehören verschiedenen **Klassen** an: `character`, `numeric`, `factor`, `tibble`, ...
  - Abfrage: `class()`
- Objekte haben eine **Länge** — Abfrage: `length()`
- Jedes Objekt wird intern durch einen **Vektor** repräsentiert

{{< fa circle-right >}} {{< fa r-project >}} ist eine **vektorbasierte** Programmiersprache

---

# RStudio und RMarkdown/Quarto {.inverse background-color="#D50006"}

---

## RStudio als Benutzeroberfläche

::: {.section-badge}
RStudio und RMarkdown/Quarto
:::

::: {.panel-tabset}

### R vs. RStudio

::: {.small}
- Basis {{< fa r-project >}}: nur die **Console** — rudimentärer Editor
- **RStudio** ist eine integrierte Entwicklungsumgebung (IDE):
  - Kostenlose Desktop-Version
  - Cloud-Version: [posit.cloud](https://posit.cloud/) (eingeschränkt kostenlos)
  - GUI, Kontextmenü, Autocomplete
  - Datenprojekte komplett in RStudio bearbeitbar
:::

### Quick Tour

::: {.small}
RStudio hat mehrere Fenster: Skript, Konsole, Environment, Pakete, Plots etc.
:::

<p align="center"><iframe width="640" height="340" src="https://www.youtube.com/embed/SdMPh5uphO0?si=0RqBc7jmHesShdsF" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p>

:::

---

## Warum RMarkdown/Quarto?

::: {.section-badge}
RStudio und RMarkdown/Quarto
:::

::: {.panel-tabset}

### Zweck

- Integration von Code und Text → **reproduzierbare Analysen**
- Zahlreiche Ausgabeformate: `.docx`, `.pptx`, `.pdf`, `.html`
- **Produktivitätssteigerung** bei wiederkehrenden Berichten

### Rmd vs. qmd

```{r}
#| echo: false
knitr::include_url('https://quarto.org/docs/faq/rmarkdown.html', height = '380px')
```

### Praxisbeispiel Airbnb

::: {.blockquote}
„At Airbnb, all R analyses are documented in rmarkdown, where code and visualizations are combined within a single written report."

::: {.tr}
Bion et al. (2017), S. 7.
:::
:::

:::

---

# Datenprojekte in {{< fa r-project >}} {.inverse background-color="#D50006"}

**tidyverse** | **R-Projekte**

---

## Phasen und Ablauf von Datenprojekten

::: {.section-badge}
tidyverse
:::

```{r}
#| echo: false
knitr::include_graphics(xfun::from_root('img','PVA1','DataScience_Workflow.PNG'))
```

::: {.quelle}
Eigene Darstellung.
:::

---

## Kernelemente des tidyverse

::: {.section-badge}
tidyverse
:::

::: {.panel-tabset}

### tidy Daten

```{r}
#| echo: false
#| out-width: '70%'
#| fig-align: center
knitr::include_graphics('https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png')
```

::: {.quelle}
Bildquelle: [Wickham et al.](https://r4ds.had.co.nz/tidy-data.html)
:::

### Verben

::: {.small}
1. **Zeilen:** `filter()`, `slice()`, `arrange()`
2. **Spalten:** `select()`, `rename()`, `mutate()`
3. **Gruppen:** `summarise()`, `group_by()`
:::

Ausführlicher: [Datenprojekte in R (Skript)](https://ffhs-economicresearch.github.io/ER014/) oder [moderndive.com Kap. 3](https://moderndive.com/3-wrangling.html)

### Pipes

```{r}
#| echo: false
knitr::include_graphics(xfun::from_root('img','PVA1','pipe_(dodona).png'))
```

::: {.quelle}
Bildquelle: [Dodona](https://dodona.be/en/activities/2127610019/)
:::

{{< fa circle-right >}} Output einer Funktion = Input der nächsten

- **magrittr-Pipe** `%>%` vs. **native Pipe** `|>` (ab R 4.1.0)
- Shortcut: `Strg/Cmd + Shift + M`

:::

---

## Beispiel: Lesbarkeit durch Pipes

::: {.section-badge}
tidyverse
:::

::: {.small}
**Aufgabe:** Log → Differenzen → Exp → Runden

```{r}
#| echo: false
#| message: false
x <- c(0.109, 0.359, 0.63, 0.996, 0.515, 0.142, 0.017, 0.829, 0.907)
library(magrittr)
```

**Verschachtelter Code (Base R):**

```{r}
#| echo: true
round(exp(diff(log(x))), 1)
```

**Intuitiv lesbar mit Pipe:**

```{r}
#| echo: true
#| message: false
x %>% log() %>% diff() %>% exp() %>% round(1)
```
:::

---

## Reproduzierbarkeit mit R-Projekten

::: {.section-badge}
R-Projekte
:::

- Projektordner mit einheitlicher Struktur: Daten, R-Skripte, Rmd/qmd, Abbildungen
- Dokumentation mit `README.md` auf jeder Ordnerebene
- Projekt erst angelegt, wenn `.Rproj`-Datei im Wurzelverzeichnis vorhanden
- Navigation: `xfun::from_root()`
- Vorlage im FFHS-Moodle-Kurs: `R-Projektvorlage.zip`

---

## Anlegen und dokumentieren von R-Projekten

::: {.section-badge}
R-Projekte
:::

<iframe width="900" height="420" src="https://www.youtube.com/embed/UvqtxY9Lgvk?si=xoiTIvh5DDKcCgg8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

---

## {background-image="https://media.giphy.com/media/KJ1f5iTl4Oo7u/giphy.gif" background-size="75%" background-color="#ffffff"}

---

## Quellenverzeichnis

::: {.ref-slide}
- Bion, R. et al. (2017): *How R helps Airbnb make the most of its data.*
- Field, A. (2012): *Discovering Statistics Using R.* SAGE.
- Wickham, H. et al. (2023): *R for Data Science.* O'Reilly. [r4ds.hadley.nz](https://r4ds.hadley.nz)
- Ismay, C. & Kim, A. (2020): *Statistical Inference via Data Science.* [moderndive.com](https://moderndive.com)
:::
